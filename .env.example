# Polymarket Autonomous Trading Agent — Configuration
# Copy to .env and fill in your values

# ═══════════════════════════════════════════════════
# Trading Mode
# ═══════════════════════════════════════════════════
TRADING_MODE=paper                    # "paper" or "live"

# ═══════════════════════════════════════════════════
# Polymarket Credentials (for live trading via sidecar)
# ═══════════════════════════════════════════════════
POLYMARKET_WALLET_PRIVATE_KEY=        # Polygon EOA private key (0x...)
POLYMARKET_FUNDER_ADDRESS=            # Only for POLY_PROXY wallets (leave blank for EOA)

# ═══════════════════════════════════════════════════
# API URLs
# ═══════════════════════════════════════════════════
GAMMA_API_URL=https://gamma-api.polymarket.com
CLOB_API_URL=https://clob.polymarket.com
DATA_API_URL=https://data-api.polymarket.com

# ═══════════════════════════════════════════════════
# Python Sidecar
# ═══════════════════════════════════════════════════
SIDECAR_HOST=127.0.0.1
SIDECAR_PORT=9090
SIDECAR_STARTUP_TIMEOUT_SECS=30      # Max wait for sidecar health check
SIDECAR_HEALTH_INTERVAL_MS=500       # Polling interval during startup

# ═══════════════════════════════════════════════════
# Market Scanner (Gamma API)
# ═══════════════════════════════════════════════════
SCANNER_PAGE_SIZE=50                  # Markets per page (max 50)
SCANNER_MAX_MARKETS=500               # Max markets to fetch per scan
SCANNER_MIN_LIQUIDITY=500.0           # Minimum liquidity in USD
SCANNER_MIN_VOLUME=1000.0             # Minimum volume in USD
SCANNER_REQUEST_TIMEOUT_SECS=15       # Per-request timeout
SCANNER_WEATHER_ONLY=true            # true = only fetch weather markets via event slugs (much cheaper)

# ═══════════════════════════════════════════════════
# Database
# ═══════════════════════════════════════════════════
DATABASE_PATH=data/polymarket-agent.db

# ═══════════════════════════════════════════════════
# Logging
# ═══════════════════════════════════════════════════
RUST_LOG=polymarket_agent=info,tower_http=info

# ═══════════════════════════════════════════════════
# Claude API (Phase 2+)
# ═══════════════════════════════════════════════════
ANTHROPIC_API_KEY=                        # Required for live analysis
ANTHROPIC_API_URL=https://api.anthropic.com
HAIKU_MODEL=claude-haiku-4-5-20251001     # Triage model (cheapest)
SONNET_MODEL=claude-sonnet-4-5-20250929   # Deep analysis model
MAX_API_COST_PER_CYCLE=0.50               # Hard cap per cycle in USD
MIN_EDGE_THRESHOLD=0.08                   # Minimum edge to trade (8%)
ESTIMATOR_REQUEST_TIMEOUT_SECS=30         # Per-request timeout for Claude API
ESTIMATOR_MAX_RETRIES=2                   # Retry count for Claude API calls

# ═══════════════════════════════════════════════════
# Position Sizing & Execution (Phase 3+)
# ═══════════════════════════════════════════════════
KELLY_FRACTION=0.5                        # Half-Kelly for variance reduction
MAX_POSITION_PCT=0.06                     # Max 6% bankroll per position
MAX_TOTAL_EXPOSURE_PCT=0.40               # Max 40% total exposure
INITIAL_BANKROLL=50.0                     # Seed bankroll in USD
EXECUTOR_REQUEST_TIMEOUT_SECS=15          # Timeout for sidecar order calls
TRADING_FEE_RATE=0.02                     # Trading fee rate (2% conservative taker assumption)

# ═══════════════════════════════════════════════════
# Cycle & Survival (Phase 4+)
# ═══════════════════════════════════════════════════
CYCLE_FREQUENCY_HIGH_SECS=600             # 10 min cycles when bankroll >= threshold
CYCLE_FREQUENCY_LOW_SECS=1800             # 30 min cycles when bankroll < threshold
LOW_BANKROLL_THRESHOLD=200.0              # Switch to low-frequency below this
DEATH_EXIT_CODE=42                        # Exit code on bankroll death (systemd won't restart)
MAX_CYCLES=                               # Stop after N cycles (omit or blank = run forever)

# ═══════════════════════════════════════════════════
# Weather Pipeline (Phase 5)
# ═══════════════════════════════════════════════════
WEATHER_SPREAD_CORRECTION=1.3             # KDE spread correction factor (1.3 = recommended for underdispersive GEFS)
WEATHER_NWS_WEIGHT=0.6                    # NWS blend weight (0.0=ensemble only, 0.6=default blend, 1.0=NWS override)
WEATHER_DEFAULT_BIAS_OFFSET=3.0           # Default °F to add to NWS-corrected ensemble (bridges NWS→WU gap until auto-calibration kicks in)

# ═══════════════════════════════════════════════════
# Position Management & Risk (Phase 6)
# ═══════════════════════════════════════════════════
STOP_LOSS_PCT=0.15                        # Exit if position down >15%
TAKE_PROFIT_PCT=0.90                      # Exit if captured >90% of expected value
MIN_EXIT_EDGE=0.02                        # Exit if edge drops below 2%
DRAWDOWN_CIRCUIT_BREAKER_PCT=0.30         # Reduce sizing if bankroll drops >30% from peak
DRAWDOWN_SIZING_REDUCTION=0.50            # Halve position sizes during drawdown
VOLUME_SPIKE_FACTOR=3.0                   # Re-analyze if volume >3x average
WHALE_MOVE_THRESHOLD=5000.0               # Re-evaluate on opposing whale move >$5k
MAX_CORRELATED_EXPOSURE_PCT=0.10          # Max 10% bankroll in correlated weather group
WEATHER_MAX_TOTAL_EXPOSURE_PCT=0.25       # Max 25% total bankroll in weather bets
WEATHER_DAILY_LOSS_LIMIT=10.0             # Pause weather bets if daily losses exceed this (USD)
POSITION_CHECK_ENABLED=true               # Enable/disable position management checks

# ═══════════════════════════════════════════════════
# Dashboard (Phase 7)
# ═══════════════════════════════════════════════════
DASHBOARD_PORT=8080
DASHBOARD_USER=admin
DASHBOARD_PASSWORD=
